# CQU-Grade-Monitor
# 重庆大学成绩监控
## 目前实现的功能

- [x] 成绩实时监控
- [x] 服务器&PC运行皆可
- [x] 邮件通知
- [x] 微信推送
- [x] 手机推送(iOS)
- [x] 程序运行错误报警推送 *[邮件+微信+手机]*

## 运行配置说明

1. 可以跑在服务器上, 注意使用`nuhup`和`输出重定向`来实现后台持久化运行, 提供参考命令如下:

   **`nohup python3 -u cqu_grade_monitor.py > grade.log 2>&1 &`**

   - 如果想看实时监控进展, 可以通过`tail -f grade.log`查看; 

   - 如果想看错误日志, 可以通过`cat error.log`查看; 

   - 如果想看邮件发送日志, 可以通过`cat mail.log`查看;

2. 也可以跑在自己的电脑上, `cmd`窗口实时显示, 也可以后台运行, 自行研究一下

3. 主函数会调用`monitor`函数, `monitor`的参数是本学期教务网显示的课程数目, 请自行设置

4. 请将`username`和`password`替换成你自己的教务网账号密码

5. **学年和学期请在`scoreUrl`设置**, 具体参见注释

6. `sleep(60)`默认每60秒查询一次成绩, 一般不需要调整; 由于学校服务器比较垃圾, 调到10秒以下可能有时候会报错, 60秒是比较稳定的.

7. **我默认将邮件推送、微信推送、手机推送给注释掉了, 如果有需要, 请参看下面几点.**

8. 如果要实现邮件通知, 请将`mailkey`和`mailAccount`替换成你自己的, 这个需要到你的邮箱个人主页开启一些协议并得到`key`, 请自行百度, 很简单

9. 如果要实现iOS手机推送, 请自行前往`App Store`下载`BARK`, 生成自己的`key`并替换代码中相应位置, 很简单

10. 如果要实现微信推送, 请关注`方糖`公众号, 阅读文档, 生成自己的`key`并替换代码中相应位置, 很简单

11. 该脚本依赖于`BeautifulSoup`, 请先`pip install bs4`, 还依赖其他的一些库, 请自行根据`import`的内容来决定.

12. 运行出错警报采用**指数退避方式**推送, 第一个目的是能实现持久警报, 防止看漏消息, 没注意到警报; 第二个目的是避免人在外面, 无法解决问题, 但是一直警报的烦恼;

13. **目前发布的版本(2021年1月6日)是我多次迭代后的, 一直在加东西删东西, 导致代码结构非常不清晰, 但是勉强能用, 请谅解!**

14. **有问题欢迎提`issue`或者联系`vayneduan@foxmail.com`**

15. **代码很粗糙, 请谅解. 后续会逐渐完善, 正在考虑封装成pypi库或者加上GUI, 方便普通学生使用**

